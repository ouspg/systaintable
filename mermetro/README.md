# Mermetro

Mermetro is a tool made for visualization of data from OUSPG ID.ID's or ID.Trace's output using **Mermaid 10.9.3**

The Python script processes .json files generated by the tools:
* It creates pairs from entries that appear on the same line.
* If pair A and pair B share a common entry, they are merged to form a group.
* Groups share the same logic in merging, which will merge even larger groups.
* This grouping process is repeated until all possible merges are done.


## Project tree

```
mermetro/
├── mermetro.py            # Main Python script
├── common_values.txt      # List of common values (e.g., DNS servers) to avoid unnecessary grouping
├── requirements.txt       # List of requirements
├── templates/
│   ├── sivusto.html       # HTML template for the visualization frontend
├── data/                  # Safe path for data files (data/* in gitignore)
└── static/
    ├── favicon.ico        # Site icon

```

## Usage

Install requirements

```console
pip install -r requirements.txt
```

 Place the `.json` file exported from ID.ID or ID.Trace into the `mermetro/data/` directory

Run `mermetro.py` as in the example below and wait, it can take several minutes to complete with larger files. Switch -m enables multiprocessing. 

```console
python3 mermetro.py data/lokitiedosto.json
```
OR
```console
python3 mermetro.py data/lokitiedosto.json -m
```

Open http://localhost:5000

### OSX venv

1. Create a virtual environment
```python3 -m venv venv```

2. Activate the virtual environment
```source venv/bin/activate```

3. Install pytz (and any other dependencies)
```pip install pytz flask watchdog```

4. Run mermetro
```python mermetro.py```

5. To deactivate the virtual environment when done:
```deactivate```
